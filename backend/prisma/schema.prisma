generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id         String   @id @default(uuid())
  google_id  String?  @unique
  nome       String?
  email      String   @unique
  avatar     String?

  password_hash String?

  termos_aceitos_em      DateTime?
  termos_versao          String?
  privacidade_aceita_em  DateTime?
  privacidade_versao     String?
  marketing_aceito       Boolean  @default(false)
  marketing_aceito_em    DateTime?

  created_at DateTime @default(now()) @db.Timestamptz(6)
  updated_at DateTime @updatedAt @db.Timestamptz(6)

  agendamentos Agendamento[]

  @@map("usuarios")
}

model Agendamento {
  id               String   @id @default(uuid())
  nome             String
  sobrenome        String
  email            String?  // <- agora opcional
  contato          String?  // <- novo campo opcional (whatsapp/telefone)
  servico          String
  data_agendamento DateTime @db.Timestamptz(6)
  status           String   @default("pendente")
  lembrete_enviado Boolean  @default(false)
  observacoes      String?
  created_at       DateTime @default(now()) @db.Timestamptz(6)
  updated_at       DateTime @updatedAt @db.Timestamptz(6)

  usuarioId String?
  usuario   Usuario? @relation(fields: [usuarioId], references: [id])

  @@map("agendamentos")
}

